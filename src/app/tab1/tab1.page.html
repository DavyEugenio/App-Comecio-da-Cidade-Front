<ion-content color="white">
  <div class="topo">
    <a class="titulo2" (click)="nullCidade()">{{ cidade.nome }}<ion-icon name="location-sharp">
      </ion-icon></a>
    <ion-searchbar placeholder="ComÃ©rcio da Cidade" [(ngModel)]="nome" (ngModelChange)="search()" autocomplete="on">
    </ion-searchbar>
  </div>
  <div *ngIf="categorias || estabelecimentos">
    <div *ngIf="categoria == null">
      <div class="categorias">
        <span class="titulo2">Categorias</span>
        <ion-slides [options]="sliderOpts">
          <ion-slide *ngFor="let categoria of categorias" (click)="changeCategoria(categoria)">
            <ion-grid>
              <ion-row class="image-row">
                <ion-col class="ion-align-self-center">
                  <img class="categoria-img" [src]="categoria?.imageUrl">
                </ion-col>
              </ion-row>
              <ion-row class="label-row" class="ion-align-items-center">
                <ion-col class="ion-align-self-center">
                  <ion-label class="categoria-label" small>{{ categoria.descricao }}</ion-label>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-slide>
        </ion-slides>
      </div>
    </div>
    <div *ngIf="categoria != null">
      <div class="categorias">
        <span class="titulo2">Categoria: </span>
        <ion-chip class="categoria-chip" (click)="clearCategoria()">
          {{ categoria.descricao }}
          <ion-icon name="close"></ion-icon>
        </ion-chip>
      </div>
    </div>
    <span class="titulo2">Estabelecimentos</span>
    <ion-list>
      <ion-item *ngFor="let estabelecimento of estabelecimentos" (click)="detalheEstabelecimento(estabelecimento.id)">
        <ion-thumbnail slot="start">
          <img [src]="estabelecimento?.imageUrl">
        </ion-thumbnail>
        <ion-label class="ion-text-wrap">
          <ion-text color="primary">
            <h2>{{ estabelecimento.nome }}</h2>
          </ion-text>
          <p>
            <ion-icon class="icon" name="call-outline"></ion-icon> {{ estabelecimento.telefone1 }}
          </p>
          <ion-text color="secondary">
            <p>Funcionamento: {{ estabelecimento.horario }}.</p>
          </ion-text>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>
  <div class="categorias" *ngIf="!estabelecimentos">
    <span class="titulo2">Categorias</span>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-thumbnail slot="start">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-thumbnail slot="start">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-thumbnail slot="start">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
        </ion-item>
      </ion-col>
    </ion-row>
    <span class="titulo2">Estabelecimentos</span>
    <ion-list>
      <ion-item>
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>
  <ion-infinite-scroll class="infinite-scroll" (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="dots"></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>